'use client'
import { useInView } from '../hooks/useInView'

// ** VALOR AJUSTABLE: 500 milisegundos para una transición lenta. **
// Puedes cambiar este valor (e.g., a 1000 para un scroll muy lento).
const SCROLL_DURATION = 1000; 

export default function Hero() {
    // 1. Ref para la sección de texto 
    const ref = useInView<HTMLDivElement>()
    // 2. Ref para la imagen
    const imageRef = useInView<HTMLImageElement>()
    // 3. Ref para el contenedor de la flecha
    const arrowRef = useInView<HTMLDivElement>()

    // Función que realiza la animación suave de scroll
    const animateScroll = (targetPosition: number, duration: number) => {
        const startPosition = window.scrollY;
        const distance = targetPosition - startPosition;
        let startTime: number | null = null;

        // Función de tiempo (ej. easeInOutQuad) para un movimiento más natural
        const easeInOutQuad = (t: number) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;

        const step = (timestamp: number) => {
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;
            
            // Calcula el progreso de la animación (entre 0 y 1)
            const progress = Math.min(1, elapsed / duration); 
            
            // Aplica la función de tiempo al progreso
            const easedProgress = easeInOutQuad(progress);

            // Nueva posición de scroll
            window.scrollTo(0, startPosition + distance * easedProgress);

            // Continúa la animación si aún no ha terminado
            if (elapsed < duration) {
                window.requestAnimationFrame(step);
            }
        };

        window.requestAnimationFrame(step);
    }

    // Función que maneja el clic y llama a la animación
    const handleScrollDown = () => {
        // Obtenemos la altura de la ventana (viewport)
        const vh = window.innerHeight
        
        // Calculamos la posición objetivo (posición actual + altura de la ventana)
        const targetScroll = window.scrollY + (vh * 0.95); 
        
        // Llamamos a la función de animación con la duración personalizada
        animateScroll(targetScroll, SCROLL_DURATION); 
    }

    return (
        <section className="relative h-screen w-full">
            <img src="/fondo.png" alt="Hero background" className="relative inset-0 w-full h-full object-cover"/>
            <img ref={imageRef} src="/modelo_fondo.png" alt="Modelo de fondo" className="appear absolute bottom-0 right-0 min-[1800px]:right-100 w-60 min-[300px]:w-65 min-[380px]:w-75 sm:w-80 md:w-100 lg:w-130 object-cover"/>
            <div className="absolute inset-0 hero-overlay"></div>

            <section ref={ref} className="appear absolute top-30 sm:inset-0 z-10 max-w-7xl mx-auto px-6 h-full flex flex-col sm:justify-center">
                <h1 className="text-3xl md:text-5xl font-bold text-white max-w-xl lg:text-nowrap">Eterno ~ Minimal Essentials</h1>
                <p className="text-white/90 mt-4 w-60 min-[400px]:w-85 md:w-full max-w-lg md:text-lg">Prendas básicas de calidad, diseño minimalista. Diseñadas para el uso diario.</p>

                <a href='/' className='relative h-15 sm:h-20 w-35 sm:w-60 md:h-30 md:w-80 mt-5 cursor-pointer transition-transform duration-100 hover:scale-110'>
                    <svg viewBox="0 0 255.12 139.16" className='size-full duration-100 hover:fill-[#D1B35C]' preserveAspectRatio="none" fill='#b69c50'>
                        <path className="cls-1" d="M254.64,8.63c1.43-1.42-.69-3.67-2.13-2.28l-22,21.31-.06-.08a1.62,1.62,0,0,0-1.69-.75,1.51,1.51,0,0,0,.21-1.78l2.9-4c1-1.36-.75-2.8-2-2.21l4.85-3.9c1.51-1.22.12-4-1.52-2.79l-3.54,2.57a1.49,1.49,0,0,0-1.55-.49L232.79,10c1.3-1.18-.46-3.65-1.82-2.54L227.88,10a1.58,1.58,0,0,0-2.48-1.81l-7.08,6a1.61,1.61,0,0,0,0-.62l1.86-2a1.56,1.56,0,0,0-2.13-2.28l-4.59,3.83a1.55,1.55,0,0,0-2.36-1.94L199.74,21.46l8.48-9.74c1.12-1.29-.39-3.65-1.83-2.54l-11,8.51a1.56,1.56,0,0,0-.76-.52l7.24-5.32a1.59,1.59,0,0,0-1.52-2.79l-8.39,4,2.49-2.95a1.64,1.64,0,0,0,0-2.16l.18-.32c.88-1.56-1.2-3.31-2.37-2L184,15.29a1.41,1.41,0,0,0-2.45-.73l-5,5.27.8-1.49c.84-1.55-1.23-3.38-2.36-1.95L172,20.12a3.94,3.94,0,0,0-3-.88l.2-.25a1.69,1.69,0,0,0-.44-2.56c3.17-3.47,6.33-7,9.44-10.52,1.14-1.3-.35-3.57-1.82-2.53q-8.57,6-16.86,12.45a1.07,1.07,0,0,0-.59,0,1.35,1.35,0,0,0-.53,0l.1-.11a1.58,1.58,0,0,0,.08-2.1l1.17-1.22c1.4-1.45-.73-3.73-2.13-2.28l-4,4.18a1.62,1.62,0,0,0-1.17-1.15l5.24-4.22c1.53-1.22.07-4-1.52-2.78L153.68,8a1.58,1.58,0,0,0-2.49-.63l-14.35,12a1.25,1.25,0,0,0-.51,0l7.73-6.92c1.31-1.17-.45-3.63-1.82-2.54-1.06.84-2.12,1.68-3.17,2.53a1.34,1.34,0,0,0-2,0l-3.23,3.4a1.27,1.27,0,0,0-2-.56l-7.62,6.16a1.58,1.58,0,0,0-1.29-1.35,1.32,1.32,0,0,0-1.28.11l-2,1.29a1.55,1.55,0,0,0-2.29-.28L113,24.91,136,2.69A1.56,1.56,0,0,0,133.91.41Q122.59,10.64,111,20.56a1.52,1.52,0,0,0-1.77.16l-3,2.49q4.92-5,9.71-10A1.55,1.55,0,0,0,116,11l1.54-1.49c1.28-1.26-.37-3.43-1.83-2.53q-8.14,5-16.16,10.19a.93.93,0,0,0-.35-.13,1.25,1.25,0,0,0-1.64-.11c-1.09.79-2.17,1.6-3.25,2.4a1.29,1.29,0,0,0-1.23-.75l5.78-6.1c1.19-1.25-.45-3.67-1.83-2.53l-3.55,2.92a1.34,1.34,0,0,0-1.53,0c-1.7,1-3.38,2-5.06,3L93,10.49c1.32-1.16-.43-3.6-1.82-2.53L79.75,16.69a2.09,2.09,0,0,0-.38-1.2,1.35,1.35,0,0,0,.2-1.15l2.68-2c1.58-1.16.17-3.86-1.52-2.78q-1.92,1.23-3.84,2.5L78.17,11c1.34-1.13-.47-3.65-1.82-2.54L70,13.73a1.2,1.2,0,0,0-1.59-.07l-1.12.9a1.54,1.54,0,0,0-.14-.53l7-6.59C75.63,6,73.5,3.92,72,5.16L69.69,7.07a1.37,1.37,0,0,0-2-.62l-8.88,6.79,1.45-1.36a1.42,1.42,0,0,0,.38-.61l4.12-3.92a1.57,1.57,0,0,0-2.13-2.29l-3,2.81a1.59,1.59,0,0,0-2.34-.35l-7.62,6.34c1.53-2.1,3.07-4.19,4.61-6.29,1-1.3-.35-3.74-1.83-2.53l-4,3.32a1.67,1.67,0,0,0-1.46-2.3l3-2.79C51.13,2.07,49.43-.29,48,.74L36.65,9l5.16-6.07C42.91,1.62,41.43-.74,40,.38L32.5,6.17A1.37,1.37,0,0,0,30.31,6L24,12.82c-1.18,1.27.41,3.64,1.82,2.54l4.06-3.15L26,16.77c-1.11,1.3.35,3.6,1.82,2.53l4.07-2.95c0,1.11,1.2,2.23,2.29,1.52l.33-.22-13.3,13c-1.25,1.22.46,3.66,1.83,2.54l1.85-1.52c.15,1.06,1.3,2.05,2.26,1.28l5.55-4.46a1.67,1.67,0,0,0,1.16,1.05,1.64,1.64,0,0,0,.55.47L32.78,32.6l-3.37,3.11a1.7,1.7,0,0,0,.61,2.7,1.66,1.66,0,0,0,2.48.48Q36,36,39.42,33.15a1.69,1.69,0,0,0,.31.63l-2,2.55a1.75,1.75,0,0,0-.39,1.38l-4.13,3.88a1.37,1.37,0,0,0-.44,1.11l-7,6.48c-1.29,1.19.45,3.64,1.82,2.54l.59-.47a1.17,1.17,0,0,0,1.44-.09c1.13-.82,2.25-1.65,3.37-2.48-.62.64-1.23,1.29-1.85,1.94l-10,8.11a1.87,1.87,0,0,0,.09,2.89l0,0c-1.1,1.29.38,3.64,1.83,2.53l10.26-7.87-.14.24c-.85,1.46,1.1,3.23,2.21,2.12l.19.09q-4.77,4.35-9.38,8.9a1.5,1.5,0,0,0-.46.92L24.3,69.87a1.74,1.74,0,0,0,.51,2.67Q12.43,83,.45,93.9c-1.29,1.18.46,3.64,1.83,2.53L16.13,85.15l-.9.78c-1.34,1.18.4,3.49,1.83,2.54s3-2,4.51-3a1.12,1.12,0,0,0,.64-.25l2.42-1.86q3-2,5.87-4.13A1.47,1.47,0,0,0,31,78.9l.47-.4q2.11-1.52,4.2-3.06c.49-.31,1-.64,1.46-1-.74.91-1.46,1.84-2.19,2.77l-8.14,7.07c-1.52,1.32.62,3.54,2.13,2.29l.06-.06a1.75,1.75,0,0,0,.46.69l-.14.15a1.52,1.52,0,0,0,.35,2.45l-.16.23a3.11,3.11,0,0,0-.91,1.32,1.27,1.27,0,0,0-.06.18l-.78,1.19a1.37,1.37,0,0,0-.24.72l-1.55,1.8c-1.11,1.29.41,3.69,1.82,2.53l.48-.39-5,4.33a1.7,1.7,0,0,0,.69,2.73,1.54,1.54,0,0,0,.74,2.24l-1.08,1.17a1.61,1.61,0,0,0,.79,2.67L23.08,112a1.82,1.82,0,0,0,.3,2.54c-.25.22-.49.45-.73.68a1.67,1.67,0,0,0,.54,2.65l-.76.6a1.67,1.67,0,0,0-.66,1.31l-8.75,7c-1.53,1.22-.06,4,1.52,2.78L36.2,112.78a1.93,1.93,0,0,0,.53,1L24.29,123.6c-1.53,1.21-.15,3.94,1.52,2.79q12-8.33,23.78-17a1.44,1.44,0,0,0,1.2-.39L54,106.08l2.59-2q-4.69,4.84-9.33,9.75c-1.39,1.48.68,3.64,2.13,2.28l10.33-9.72q-3.78,4.95-7.44,10c-1.17,1.6.65,3.72,2.13,2.28l8.95-8.78-1,1.32c-1,1.32.32,3.68,1.83,2.54q4.5-3.43,8.88-7.07a1.61,1.61,0,0,0,2.57.83l1.28-1.08-13,13.6a1.56,1.56,0,0,0,2.13,2.28l11.28-10.51A1.52,1.52,0,0,0,79.9,113l11.63-11.7a1.87,1.87,0,0,0,.15.32q-3.74,4.4-7.45,8.8c-1.3,1.53.82,3.82,2.13,2.28l7.11-8.35a1.64,1.64,0,0,0,.18.69q-4.87,5.22-9.64,10.56c-1.13,1.28.42,3.67,1.83,2.53l.39-.32a1.43,1.43,0,0,0,2.46.69q3.15-3.51,6.28-7a1.31,1.31,0,0,0,1.63-.31l11.5-12c1.2-1.09,2.39-2.17,3.57-3.27a1.5,1.5,0,0,0,.18.41L90.94,122.67c-1.14,1.45.43,3.41,1.8,2.55L82.9,136.4c-1.33,1.51.74,3.74,2.13,2.28l34-35.94a1.43,1.43,0,0,0,.37.23l-5.17,5.67c-1.37,1.5.68,3.65,2.12,2.28l2.56-2.42a1.27,1.27,0,0,0,1.19-.49l.69-.8c-1.54,2.08-3.06,4.19-4.57,6.31l-9.42,10.29c-1,1.07,0,3.33,1.46,2.69l1.18-.5a1.7,1.7,0,0,0,1-1.56q3.47-3.78,6.92-7.55a1.58,1.58,0,0,0,.39-.24l10.94-9.56a1.44,1.44,0,0,0,2.21.18l1.94-1.83q-7.77,8.37-15.56,16.72c-1.37,1.48.72,3.71,2.13,2.28l11.15-11.28.07,0-6.21,6.65c-1.38,1.47.71,3.7,2.13,2.28l11.41-11.48a1.34,1.34,0,0,0,.27-.17l3.62-2.91a1.58,1.58,0,0,0,.47.91l-3.22,2.91a1.36,1.36,0,0,0-.42,1.52q-6.14,7.38-11.79,15.24h0l-.23.33c-1.09,1.52,1.16,3.12,2.36,1.95l30.45-29.51h0L138.8,123.13c-1.19,1.28.37,3.57,1.82,2.54a358,358,0,0,0,31.69-25.55l-20.59,24.32c-1.31,1.54.7,3.71,2.13,2.28l1.7-1.71a1.31,1.31,0,0,0,1.83.29c2-1.59,3.92-3.21,5.87-4.84l-3,2.67c-1.39,1.23.38,3.31,1.82,2.54q7.35-3.92,14.4-8.38c-.22,1.32,1.42,2.65,2.56,1.44l1.94-2.06,2.92-2.13c.22,1,1.27,1.88,2.2,1.12l.28-.23a1.24,1.24,0,0,0,.69,0l-7.54,6.69c-1.31,1.17.43,3.59,1.83,2.54l10.65-8a1,1,0,0,0,.15.14l-6,5.8c-1.29,1.24.36,3.44,1.82,2.53,2.26-1.41,4.48-2.9,6.67-4.42a1.57,1.57,0,0,0,2.38.4l5.6-4.76a1.23,1.23,0,0,0,1.33.08c0,1.16,1.09,2.28,2.2,1.45l3.66-2.73a1.23,1.23,0,0,0,.35-.16l4.05-2.69a1.48,1.48,0,0,0,1.11.83,1.79,1.79,0,0,0,.4,1.57l-3.37,3.13c-1.28,1.2.44,3.61,1.83,2.54l8.84-6.8a1.33,1.33,0,0,0,1.87.34l3.32-2.57-.23.73a1.41,1.41,0,0,0,.26,1.44L214.7,128.29c-1.17,1.27.39,3.61,1.82,2.54l3.35-2.51a1.71,1.71,0,0,0,.63-1.74l19.42-21.11a1.56,1.56,0,0,0-2.13-2.28q-2.65,2.31-5.3,4.63l.06-.21c.4-1.28-1.13-2.65-2.21-1.82l-2.2,1.7,1.4-1.3a1.68,1.68,0,0,0-.63-2.69l2.64-2.69a1.63,1.63,0,0,0-1.36-2.73l2.7-2.29c1-.83.31-2.33-.67-2.69L240.74,86c1.36-1.13-.41-3.54-1.82-2.54L220.81,96.37l19.45-17.73c1.29-1.18-.47-3.65-1.83-2.54l-15.77,13,13.85-13.31a1.44,1.44,0,0,0,.46-1.32L240,71.64c1.29-1.18-.47-3.65-1.83-2.54L222.78,81.69a1.56,1.56,0,0,0-2.15-.07L219,83.06l-.05-.09q7.09-7.2,13.6-15l13.61-12.78c1.48-1.39-.64-3.55-2.13-2.28L225.08,69.07a1.29,1.29,0,0,0-.94-.38,1.65,1.65,0,0,0-1.21-.61l10.2-10.4c1.42-1.44-.69-3.66-2.13-2.28L229.32,57q3.45-3.9,6.89-7.82a1.62,1.62,0,0,0-1-2.72c.51-1.49-1.28-3.15-2.42-1.74l-11.08,13.7h0a1.67,1.67,0,0,0-.24-1.38q4.63-5.28,9.29-10.55c1.25-1.43-.56-3.53-1.89-2.51,1.47-1.54,2.93-3.09,4.4-4.64,1.2-1.26-.38-3.58-1.82-2.53Q222.5,43.3,214,50.29q4.71-5,9.12-10.37Zm-25.4,10.71-1.94,1.89a2,2,0,0,0-.08-.26Zm-162,82.46q3.36-4.27,6.81-8.48l.31-.26.55,0h1.27Zm86,10.45,7-7.56a1.58,1.58,0,0,0,.57,1.33Q157,109.19,153.18,112.25Zm7.31-91.5a1.43,1.43,0,0,0-.67.34l-5.33,4.79a1.42,1.42,0,0,0-1.78.21l-4.49,4.19-1.64,0q9.51-8,19.41-15.48C164.17,16.81,162.33,18.78,160.49,20.75ZM216.67,57a1.5,1.5,0,0,0,.38-.58l11.14-11.76q-6.1,7-12.55,13.56l-.15-.14Zm5.05-30.87a1.45,1.45,0,0,0-.1-.41l.06-.07.21-.12c0,.15,0,.29,0,.44Z"/>
                    </svg>
                    <div className='text-white text-xs sm:text-lg md:text-2xl absolute left-1 bottom-2 inset-0 flex items-center justify-center font-bold pointer-events-none'>VER COLECCIÓN</div>
                </a>
                
                {/*<div className="mt-8 flex gap-4">
                    <a className="inline-block px-6 py-3 bg-white text-black font-semibold rounded shadow-sm" href="#products">Shop Men</a>
                    <a className="inline-block px-6 py-3 border border-white text-white rounded backdrop-blur-xs" href="#about">About</a>
                </div>¨*/}
            </section>

            {/* Contenedor de la flecha clickeable */}
            <div ref={arrowRef}
                className="appear absolute bottom-6 left-1/2 -translate-x-1/2 z-20 cursor-pointer" 
                onClick={handleScrollDown}
                aria-label="Scroll down to next section" 
                role="button"
            >
                <svg
                    viewBox="0 0 24 24"
                    fill="#b69c50"
                    xmlns="http://www.w3.org/2000/svg"
                    className="animate-bounce w-20 h-20 md:w-30 md:h-30"
                >
                    <path d="M12 17c-.3 0-.6-.1-.8-.3l-6-6a1.1 1.1 0 0 1 1.6-1.6l5.2 5.2 5.2-5.2a1.1 1.1 0 0 1 1.6 1.6l-6 6c-.2.2-.5.3-.8.3z"/>
                </svg>
            </div>

        </section>
    )
}